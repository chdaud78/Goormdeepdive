<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>MBTI ê²€ì‚¬</title>
    <style>
        body {
            max-width: 700px;
            margin: 40px auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
        }

        .question {
            background: #f9f9f9;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid #ddd;
            border-radius: 10px;
        }

        .question p {
            font-size: 18px;
            margin-bottom: 15px;
        }

        .options {
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .option {
            display: inline-block;
        }

        input[type="radio"] {
            display: none;
        }

        label {
            display: inline-block;
            padding: 12px 24px;
            background-color: #a957c2;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
        }

        input[type="radio"]:checked+label {
            background-color: #e03f65;
        }

        #result {
            margin: 40px 0;
            font-size: 20px;
            text-align: center;
            font-weight: bold;
        }
    </style>
</head>

<body>

<h1>ğŸ§  MBTI ê°„ë‹¨ ê²€ì‚¬</h1>
<div id="result"></div>
<div id="quiz"></div>

<script>
  const questions = {
    q1: { text: "ê³ ë“±í•™êµì—ì„œ ìœ ëª…í–ˆë‚˜ìš”?", a: "E", b: "I" },  // EI
    q2: { text: "ìš´ë™(ìŠ¤í¬ì¸ )ë¥¼ í•˜ë‚˜ìš”?", a: "S", b: "N" },   // SN
    q3: { text: "ìˆ˜í•™ì„ ì˜í•˜ë‚˜ìš”?", a: "T", b: "F" },        // TF
    q4: { text: "ì§€ê¸ˆ ë°©ì´ ê¹¨ë—í•œê°€ìš”?", a: "J", b: "P" }     // JP
  };

  const answers = {}; // ì‚¬ìš©ìì˜ ì‘ë‹µì„ ì €ì¥í•  ê°ì²´

  // ê° MBTI í•­ëª© ì„ íƒ ì‹œ ì ìˆ˜ ì¦ê°€ (í•­ëª©ì´ ë§ì•„ì§ˆ ê²½ìš° ìœ ìš©!)
  const score = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

  const quizEl = document.getElementById("quiz");
  const resultEl = document.getElementById("result");

  function renderQuestions() {
    // Object.entries
    // Object.keys
    // ëª¨ë“  ì§ˆë¬¸ì— ì‘ë‹µ ì™„ë£Œí•˜ë©´ ê²°ê³¼ í‘œì‹œ
    for(const [key, value] of Object.entries(questions)){
      const element = document.createElement('div');
      element.classList.add('question');
      element.innerHTML = `
            <p>${value.text}</p>
            <div class="options">
                <div class="option">
                    <input id="${key}_a" name="${key}" type="radio" value="a">
                    <label for="${key}_a">ë„¤</label>
                </div>
                <div class="option">
                    <input id="${key}_b" name="${key}" type="radio" value="b">
                    <label for="${key}_b">ì•„ë‹ˆìš”</label>
                </div>
            </div>
        `;
      quizEl.appendChild(element);

      const radioA = document.getElementById(`${key}_a`);
      const radioB = document.getElementById(`${key}_b`);

      [radioA, radioB].forEach(input => {
        input.addEventListener('change', (e) => {
          const valueKey = e.target.value;
          answers[key] = value[valueKey];

          Object.keys(score).forEach(x => score[x] = 0);
          Object.values(answers).forEach(x => score[x]++);

          if(Object.entries(answers).length === Object.entries(questions).length) {
            showResult();
          }
        })
      })
    }
  }

  function showResult() {
    // Object.values
    // ì‚¬ìš©ì ì‘ë‹µì„ ë°˜ë³µí•˜ë©° í•´ë‹¹ ì§€í‘œì˜ ì ìˆ˜ ì¦ê°€
    // ê°ì²´ ì¬êµ¬ì„±ì„ ìœ„í•´ entries â†’ fromEntries ì‚¬ìš©
    // ê° í•­ëª©ë³„ ì ìˆ˜ ë¹„êµ í›„ MBTI 4ìë¦¬ ë¬¸ìì—´ ìƒì„±
    const result = [];
    Object.entries(score).forEach(([key,value]) => {
      if(value === 1) result.push([key,true]);
    });

    const resultObject = Object.fromEntries(result);

    let resultP = ''
    Object.entries(resultObject).forEach(([key,value]) => {
      resultP += key
    });
    resultEl.textContent = `ë‹¹ì‹ ì˜ MBTIëŠ” ${resultP} ì…ë‹ˆë‹¤!`

   /* let result = '';

    score.E >= score.I ? result += 'E' : result += 'I';
    score.N >= score.S ? result += 'N' : result += 'S';
    score.T >= score.F ? result += 'T' : result += 'F';
    score.J >= score.P ? result += 'J' : result += 'P';

    resultEl.textContent = `ë‹¹ì‹ ì˜ MBTIëŠ” ${result} ì…ë‹ˆë‹¤!`;*/
  }
  renderQuestions();
</script>

</body>

</html>