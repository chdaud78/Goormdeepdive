# 2025년 8월 11일 미션

<aside>
🍌

아래 첨부파일을 다운 받아서 script 영역을 조건에 맞게 작성하세요!

[bookmark.html](attachment:aa2dd853-68d6-4e59-bf63-aae2590f4f9b:bookmark.html)

</aside>

## 🔖 오프라인 #태그형 북마크 대시보드

- 네트워크 연결없이도 사용 가능한 태그형 북마크 대시보드를 만든다.
- 핵심: CRUD(추가/삭제), 검색(디바운스), 태그 필터(Set), 정렬, 로컬 저장(localStorage), 가짜 동기화(async/await), 토스트 알림(클래스/this/bind), XSS 최소 방어.

### 1️⃣ 데이터

- 항목 : `{ id: number, title: string, url?: string, tags: string[], createdAt: number }`
- 전역 상태 :
    - `items: Item[]`
    - `filter: { q: string, selected: Set<string>, sort: 'recent'|'title'|'tags' }`
- **힌트**: 불변 업데이트(스프레드 `...`), `Set`은 직렬화 시 배열로 변환/복원.

### 2️⃣ 화면 구성 (UI)

- 상단 바: 제목, **테마 토글 버튼**(라이트/다크)
- 테마 토글 버튼 클릭 시 `body`에 `light` 클래스를 토글.
    - 현재 테마를 localStorage에 `1/0`으로 저장, 재접속 시 복원.
    - **힌트**: `classList.toggle`, 불리언 저장을 문자열로 변환.
- 입력 폼: `제목`, `URL/메모`, `태그(쉼표 구분)`, `추가` 버튼
- 필터 영역: `검색 입력`, `정렬 셀렉트(recent/title/tags)`, `필터 초기화 버튼`
- 목록 영역: 카드 그리드(제목/링크 or 메모, 태그들, 삭제 버튼)
- 통계 영역: **총 개수**, **선택 태그 나열**, **TOP 태그 5개(빈도)**
- 토스트 영역: 오른쪽 하단 스택 표시
    - 토스트 알림(UI 컴포넌트)
    - 루트 컨테이너에 토스트 요소를 누적(스택)으로 추가하고 **2.2초 후 자동 제거**.
    - **힌트**: **클래스**로 구현하고, 메서드를 외부로 전달할 때 `this`문제 해결을 위해 `bind` 사용.
- **힌트**: 반응형 그리드(CSS)

### 3️⃣ 초기화/상태 관리

- 앱 시작 시 localStorage에서 상태를 읽어 초기화.
- 로컬 저장(localStorage)
    - 상태가 바뀔 때마다 **직렬화**해서 저장.
    - 복원 시 `filter.selected`는 배열→`Set`으로 재구성.
    - **힌트**:
        - `localStorage.getItem` , `localStorage.setItem`
        - `JSON.stringify/parse`
        - 순환 참조 없는 평면 구조 만들기
        - 직렬화용 보조 객체 생성.
- 상태 변경 시 **구독자에게 알림(Pub/Sub)** → 화면 전체를 **순수 함수형 렌더**로 갱신.
- **힌트**: 간단 Pub/Sub(리스너 `Set`), `store.get()`, `store.set(updater)` 패턴, 렌더는 상태만 입력받아 DOM을 그리는 순수함수.

### 4️⃣ 항목 추가(Create)

- 제출 조건: `title` 필수(공백 제거).
- `tags`: 쉼표 구분, 트림, 빈 값 제거.
- `id`: `Date.now() + Math.random()*1000`의 정수화.
- 추가 후 폼 리셋, 토스트 “추가했어요. (동기화 중)”.
- **힌트**: 문자열 처리 `split/map/filter`, 무작위 ID.

### 5️⃣ 항목 삭제(Delete)

- 카드별 “삭제” 클릭 시 해당 `id`로 삭제.
- 삭제 후 토스트 “삭제했어요.”
- **힌트**: **이벤트 위임**으로 목록 컨테이너에 한 번만 클릭 핸들러. `closest()`로 버튼/카드 탐색. `Array.prototype.filter`로 불변 삭제.

### 6️⃣ 검색

- 입력 후 **300ms** 대기 후 검색 실행.
- 검색 대상: `title` 포함 OR `tags` 중 일부 포함.
- **힌트**: **디바운스(클로저로 타이머 캡슐화)**, `toLowerCase()` 비교, `some()`.
- 필터 초기화
    - 검색어 제거, **선택 태그 Set 비우기**, 정렬을 `recent`로.
    - **힌트**: `Set` 비우기는 `new Set()`로 대체(불변).

### 7️⃣ 태그 필터(Set 기반)

- 카드의 태그 배지를 클릭 시 **토글 선택**한다.
- 선택된 태그가 하나라도 있으면, 해당 태그를 **하나 이상 포함하는** 항목만 보이게 한다.
- 선택된 태그는 통계 영역에 표시.
- **힌트**: `Set.has/add/delete`, 불변 갱신 시 `new Set(old)`로 복사.

### 8️⃣ 정렬 옵션

- `recent`: `createdAt` 내림차순
- `title`: `localeCompare`로 오름차순
- `tags`: 태그 개수 내림차순
- **힌트**: `Array.prototype.sort` 커스텀 비교함수.

### 9️⃣ 통계 표시(Map)

- 전체 항목의 태그 빈도를 집계 후 **상위 5개**를 `#name(count)`로 표시.
- **힌트**: `Map`으로 카운팅(`get/set`), `forEach`로 누적, 스프레드로 배열화 후 `sort → slice`.

### 🔟 순서/원칙

1. `items`를 **검색 → 태그필터 → 정렬** 순으로 파이프 처리
2. HTML 문자열로 카드 목록을 생성해 컨테이너의 `innerHTML`에 삽입
3. 이벤트 위임(태그 클릭/삭제 버튼) 연결
4. 통계(Map) 다시 계산해 표시
    - **힌트**: **순수 함수형 렌더**(입력=상태 → 출력=DOM), 사이드이펙트 최소화.
5. 보안/안정성 최소 요건
    - 텍스트를 DOM에 넣을 때 **간단 이스케이프** 적용(`& < > " '`)
    - `a` 링크는 `target="_blank" rel="noreferrer"`로 열기
    - **힌트**: 문자열 치환 정규식, 속성값용 별도 이스케이프.